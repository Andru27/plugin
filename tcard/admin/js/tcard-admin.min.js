/* 
 Author: Cloanta Alexandru
 Name: Tcard Wordpress
 Version: 2.9.1
*/
!function(t){"use strict";t(document).on("ready",function(){t(".bootstrap-info-btn").on("click",function(){t(this).next(".bootstrap-info").slideToggle(300)});var e=!1;t(document).on("click",".tcard-row-bar",function(e){if(e.target==this){var a=t(this).find("input.tcard_check");t(this).next(".tcard-skin").slideToggle(),a.prop("checked")?a.prop("checked",!1):a.prop("checked",!0)}}),t(".tcard-container-skins").sortable({handle:".tcard-row-bar",opacity:.8,cursor:"move",delay:100,placeholder:"tcard-highlight",start:function(e,a){for(var n=0;n<t(".tcard-row").length;n++)t(".tcard-row").eq(n).attr("data-index",n);t(".tcard-highlight").height(a.item.height())},update:function(e,a){n.reorder(".tcard-row"),t(".tcard-textarea").each(function(){wp.editor.remove(t(this).attr("id")),n.add_wp_editor(t(this))})}}),t(".modal-post-content,.tcard-modal-sortable").sortable({opacity:.8,cursor:"move",delay:100}),t(".post-open_set").on("click",function(){var e=t(this);e.toggleClass("post-is-open"),t(".select-category-post").slideToggle(300),e.hasClass("post-is-open")?e.closest(".tcard-sidebar-item.elements").animate({height:"+=196"},300):e.closest(".tcard-sidebar-item.elements").animate({height:"-=196"},300)}),t(document).on("click",".tc-post-element",function(){var e,a,n,i,s,r,o=t(this),d=o.parent(".modal-post-header").next(".modal-post-content");"button"==(e=o.text().replace(" ","_"))?e="post_button":"comment count"==e?e="comment_count":"featured image"==e?e="featured_image":"show category"==e&&(e="show_category"),a=o.closest(".tcard-row").index(),n=o.closest(".tcard-main-elem").attr("data-side"),i=o.attr("data-itemnum"),d.hasClass("arcfilter_item_post")?"title"==o.text()||"content"==o.text()?(s="content"==o.text()?17:"",r='<div class="tc_post_item '+e+'"><input type="hidden" name="cat_items'+i+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Max words</span><input class="tcard-input" type="number" placeholder="'+s+'" name="cat_items'+i+"[set_item]["+o.text()+']" value=""></div>'):r="post_button"==e?'<div class="tc_post_item '+e+'"><input type="hidden" name="cat_items'+i+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Button Text</span><input class="tcard-input"  type="text" placeholder="Read More" name="cat_items'+i+"[set_item]["+e+']" value=""></div>':"comment_count"==e||"date"==e||"author"==e||"show_category"==e?'<div class="tc_post_item '+e+'"><input type="hidden" name="cat_items'+i+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Type</span><select class="post_select_type tcard-input" name="cat_items'+i+"[set_item]["+e+']"><option></option><option value="'+e+'_post_icon">Icon</option><option value="'+e+'_post_text">Text</option></select><input class="tcard-input input-type-text" type="text" name="cat_items'+i+"[set_item]["+e+'_text]" value=""></div>':'<div class="tc_post_item '+e+'"><input type="hidden" name="cat_items'+i+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+"</h4></div>":"title"==o.text()||"content"==o.text()?(s="content"==o.text()?17:"",r='<div class="tc_post_item '+e+'"><input type="hidden" name="content'+a+"_"+n+"[tcard_post"+i+'][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Max words</span><input class="tcard-input" type="number" placeholder="'+s+'" name="content'+a+"_"+n+"[tcard_post_"+o.text()+'][]" value=""></div>'):r="post_button"==e?'<div class="tc_post_item '+e+'"><input type="hidden" name="content'+a+"_"+n+"[tcard_post"+i+'][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Button Text</span><input class="tcard-input"  type="text" placeholder="Read More" name="content'+a+"_"+n+"[tcard_post_"+e+'][]" value=""></div>':"comment_count"==e||"date"==e||"author"==e||"show_category"==e?'<div class="tc_post_item '+e+'"><input type="hidden" name="content'+a+"_"+n+"[tcard_post"+i+'][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+'</h4><span>Type</span><select class="post_select_type tcard-input" name="content'+a+"_"+n+"[tcard_post_"+e+'][]"><option></option><option value="'+e+'_post_icon">Icon</option><option value="'+e+'_post_text">Text</option></select><input class="tcard-input input-type-text" type="text" name="content'+a+"_"+n+"[tcard_post_"+e+'_text][]" value=""></div>':'<div class="tc_post_item '+e+'"><input type="hidden" name="content'+a+"_"+n+"[tcard_post"+i+'][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+o.text()+"</h4></div>",d.append(r)}),t(document).on("click",".post_select_type",function(){"author_post_text"==t(this).val()||"comment_count_post_text"==t(this).val()||"date_post_text"==t(this).val()||"show_category_post_text"==t(this).val()||"tags_post_text"==t(this).val()?t(this).next(".input-type-text").fadeIn(0):t(this).next(".input-type-text").fadeOut(0).val("")}),t(document).on("click",".remove-post-item",function(){t(this).parent().remove()});var a=0;t(".tc-add-new-skin").on("click",function(n){return t(".select-tcard-group select").val()?t("#select-skin").val()?void(e||(t(this).find("input").val()>0&&(a=t(this).find("input").val()),a++,t(".tcard-count-skin").find("span").text(a),t(this).find("input").val(a),i.add_skin("new-skin",t("#select-skin").val(),a,""))):(alert("Please select type of skin"),void t(this).find("input").val("")):(alert("Please create a group"),void t(this).find("input").val(""))}),t(document).on("click",".tcard-delete-skin",function(){var e=t(this).closest(".tcard-row").index();t(".tcard-row").each(function(){t(this).attr("data-index",t(this).index())}),t(this).closest(".tcard-row").remove(),t(".tcard-count-skin").find("span").text(t(".tcard-row").length),t(".tc-add-new-skin").find("input").val(t(".tcard-row").length);for(var a=0;a<t(".tcard-row").length;a++)t(".tcard-skin-order").eq(a).text(a+1);i.delete_skin(e,t(".tcard-row").length),n.reorder(".tcard-row")}),t("#select-skin").on("change",function(){if(!t(".select-tcard-group select").val())return alert("Please create a group."),void t(this).val("");i.select_skin(t(this).val())}),t(".delete-tcard-group").on("click",function(){var e;return e=t(".tcard-group-title").val()?t(".tcard-group-title").val():t(".select-tcard-group select option[selected]").text(),confirm("Are you sure you want to remove "+e+" group ?")}),t(document).on("click",".tcard-settings",function(){t(this).next(".tcard-modal").fadeIn().addClass("is-open"),t(".tcard-container-skins").sortable("disable")}),t(document).on("click",".tcard-element-bar",function(){t(".customSkin .tcard-item-elements").sortable("disable"),n.modal(t(this).next(".tcard-modal"))}),t(document).on("click",".tcard-modal,.tcard-close-modal",function(e){e.target==this&&(t(this).closest(".tcard-modal").fadeOut().removeClass("is-open"),setTimeout(function(){t(".customSkin .tcard-item-elements").sortable("enable"),t(".tcard-container-skins").sortable("enable")},200))}),t("#tcard-save").on("click",function(e){window.onbeforeunload=null,t(".spinner").css("visibility","visible")}),t(".copy-shortcode").on("click",function(){n.copy_shortcode(document.getElementById("tcard-code"))}),t(".tcard-shortcode").on("click",function(){n.copy_shortcode(this)}),t(".elements-menu h4").on("click",function(a){if(!t(this).hasClass("tc-current-side")){if(e)return;var i=t(this).attr("data-tcard-menu");t(".elements-menu h4").removeClass("tc-current-side"),t(this).addClass("tc-current-side"),n.fade_content(i,".tcard-item-inner","data-tcard-box",".tcard-sidebar-item.elements",10)}}),t(document).on("click",".tcard-clone-skin",function(){var e=t(this),a=t(".tc-add-new-skin").find("input").val(),n=[];if(t(".tcard-row").find(".new-element_maybe").each(function(){var e=t(this).closest(".tcard-item").attr("data-item").replace("tcard-",""),a=t(this).attr("data-element").replace(e+"_","");n.push(a)}),n.length)alert("Elements "+n+" are not saved");else{a++,t(".tcard-count-skin").find("span").text(a),t(".tc-add-new-skin").find("input").val(a);var s=e.closest(".tcard-row").index();i.add_skin("clone-skin",t("#select-skin").val(),a,s)}}),t(document).on("click",".tcard-delete-element",function(){n.removeContent("element",t(this))}),t(document).on("click",".tcard-delete-item",function(){n.removeContent("item",t(this))}),t(document).on("click",".increase-size",function(){n.setWidth("increase",t(this))}),t(document).on("click",".decreases-size",function(){n.setWidth("decrease",t(this))}),t(document).on("click",".tcard-add-item",function(){n.add_item_list(t(this),t(this).text())}),t(".tcard-input").on("input",function(t){window.onbeforeunload=function(){return!0}}),t(document).on("click",".tcard-remove-item",function(){t(this).closest(".tcard-modal-item").remove()}),t(document).on("click",".settings-btn",function(){var a=t(this).closest(".tcard-modal-body.settings-skin");if(a.find(".menu-sides-item").removeClass("tc-current-side").first().addClass("tc-current-side"),a.find(".card-admin").removeClass("flipped rotate-in rotate-out"),!t(this).hasClass("tc-current-side")){if(e)return;var i=t(this).attr("data-menu-container");t(".tcard-modal.is-open .settings-btn").removeClass("tc-current-side"),t(this).addClass("tc-current-side");var s=t(this).closest(".tcard-modal").find(".tcard-modal-container"),r=t(this).closest(".tcard-modal").find(".tcard-modal-content");n.fade_content(i,s,"data-modal-container",r,20)}});var n={settings:function(e){function a(e,a){var s,r=e.closest(".set_box").find(".box_shadow_value");s=n(e);var o=["frostedglass_blur","border-width","border-style","border-color","border-top-width","border-top-style","border-top-color","border-right-width","border-right-style","border-right-color","border-bottom-width","border-bottom-style","border-bottom-color","border-left-width","border-left-style","border-left-color","border-radius","border-top-right-radius","border-top-left-radius","border-bottom-right-radius","border-bottom-left-radius","background-color","background-position","background-size","background-repeat","background-attachment","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","frostedglass_bg_colorg"],d=["background-color","border-color","border-top-color","border-right-color","border-bottom-color","border-left-color","frostedglass_bg_colorg"];if(r.length){var c=r.find(".shadow-h").val(),l=r.find(".shadow-v").val(),m=r.find(".shadow-b").val(),h=r.find(".shadow-s").val(),u=r.find(".shadow-c").val(),p=r.find(".shadow-o").val();c.length||(c=0),l.length||(l=0),m.length||(m=0),h.length||(h=0),s.css({"-webkit-box-shadow":c+"px "+l+"px "+m+"px "+h+"px rgba("+i(u,p)+")","-moz-box-shadow":c+"px "+l+"px "+m+"px "+h+"px rgba("+i(u,p)+")","box-shadow":c+"px "+l+"px "+m+"px "+h+"px rgba("+i(u,p)+")"}),r.find(".tcard-color-shadow").val(i(u,p))}else if("color"==a){for(_=0;_<=d.length;_++)if(e.hasClass(d[_])&&(s.css(d[_],e.val()),e.hasClass("frostedglass_bg_colorg"))){var f=e.closest(".tcard-modal-side_box").find(".frostedglass_bg_color"),v=e.closest(".tcard-modal-side_box").find(".frostedglass_opacity");f.each(function(){t(this).val(i(e.val(),v.val()))});var g;v.on("input",function(){f.val(i(e.val(),t(this).val())),g=s.hasClass("tcard-front")||s.hasClass("tcard-back")?".glass":".glass-box",s.find(g).css({"-webkit-box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")","-moz-box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")","box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")"})}),g=s.hasClass("tcard-front")||s.hasClass("tcard-back")?".glass":".glass-box",s.find(g).css({"-webkit-box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")","-moz-box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")","box-shadow":"inset 0 0 0 1000px rgba("+i(e.val(),v.val())+")"})}}else for(var _=0;_<=o.length;_++)e.hasClass(o[_])&&("border-width"==o[_]||"border-top-width"==o[_]||"border-right-width"==o[_]||"border-bottom-width"==o[_]||"border-left-width"==o[_]||"padding-top"==o[_]||"padding-right"==o[_]||"padding-bottom"==o[_]||"padding-left"==o[_]||"margin-top"==o[_]||"margin-right"==o[_]||"margin-bottom"==o[_]||"margin-left"==o[_]?s.css(o[_],e.val()+"px"):"frostedglass_blur"==o[_]?(g=s.hasClass("tcard-front")||s.hasClass("tcard-back")?".glass":".glass-box",s.find(g).css({"-webkit-filter":"blur("+e.val()+"px)",filter:"blur("+e.val()+"px)"})):s.css(o[_],e.val()))}function n(t){var e,a=t.closest(".tcard-modal-container"),n=a.find(".menu-sides-item.tc-current-side").attr("data-menu-side"),i=a.find(".tcard-modal-side.active_side .menu_sides_box.active").attr("data-menu-side_box");return"tcard-front"==n?e="tcard-front"==i?a.find("."+i):a.find("."+n+" ."+i):"tcard-back"==n&&(e="tcard-back"==i?a.find("."+i):a.find("."+n+" ."+i)),e}function i(t,e){if("#"===t.charAt(0)&&(t=t.substr(1)),t.length<2||t.length>6)return!1;var a,n,i;if(3===t.length)a=parseInt(t[0].toString()+t[0].toString(),16),n=parseInt(t[1].toString()+t[1].toString(),16),i=parseInt(t[2].toString()+t[2].toString(),16);else{if(6!==t.length)return!1;a=parseInt(t[0].toString()+t[1].toString(),16),n=parseInt(t[2].toString()+t[3].toString(),16),i=parseInt(t[4].toString()+t[5].toString(),16)}return[a,n,i,e]}var s=this,r=!1;e.find(".menu-sides-item").on("click",function(){if(!r&&!t(this).hasClass("tc-current-side")){var e=t(this).attr("data-menu-side"),a=t(this).closest(".tcard-modal-container").find(".tcard-modal-side");t(".menu-sides-item").removeClass("tc-current-side"),t(this).addClass("tc-current-side"),a.removeClass("active_side"),a.filter("[data-modal-side="+e+"]").addClass("active_side");var n=t(this).closest(".tcard-modal-container").find(".card-admin");"tcard-front"==e?i("showface"):"tcard-back"==e&&i("showback");function i(t){if(!r){var e,a;n.hasClass("flip-x")||n.hasClass("flip-y")?(e="flipped",a=" "):(n.hasClass("rotate-x")||n.hasClass("rotate-y"))&&(e="rotate-in",a="rotate-out"),"showback"===t?n.removeClass(a).addClass(e).find(".tcard-back").addClass("z-up"):"showface"===t&&n.removeClass(e).addClass(a).find(".tcard-back").removeClass("z-up"),r=!0,setTimeout(function(){r=!1},500)}}s.fade_content(e,a,"data-modal-side","",20)}}),e.find(".menu_sides_box").on("click",function(){if(!r){var e=t(this).attr("data-menu-side_box"),a=t(this).closest(".tcard-modal-side").find(".tcard-modal-side_box");t(this).parent().find(".menu_sides_box").removeClass("active"),t(this).addClass("active"),s.fade_content(e,a,"data-modal-side_box","",20)}}),e.find(".set_box_title").on("click",function(){t(this).next(".set_box_inner").slideToggle(300)}),e.find(".select_type_set").on("change",function(){var e=t(this).val(),a=t(this).closest(".set_box_inner").find(".sides_box");a.fadeOut(0),e.length&&a.filter("*[data-active-box="+e+"]").fadeIn(200);var i=n(t(this));a.find(".wp-color-result").css("background-color",""),t(this).hasClass("select_shadow")?i.css({"-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"}):t(this).hasClass("select_border_radius")?i.css("border-radius",""):t(this).hasClass("select_border")&&i.css("border",""),a.find(".tcard-input").val("")}),e.find(".mini_boxs_ul").find(".tcard-input").on("input change",function(){a(t(this),"all")}),e.find(".box_shadow_none.with_margin").find("select.tcard-input").on("change",function(){a(t(this),"all")});var o={change:function(e,n,i){a(t(this),"color")}};t(".tcard-color-picker").wpColorPicker(o),e.find(".display_frostedglass").on("click",function(){var e,a,i=t(this),s=n(i);if(a=s.hasClass("tcard-front")||s.hasClass("tcard-back")?".glass":".glass-box",s.find(a).toggleClass("is_active"),!i.prop("checked")){s.find(a).css({"-webkit-box-shadow":"","-moz-box-shadow":"","box-shadow":""}),(e=t(this).closest(".set_box")).find(".frostedglass_bg_color,.frostedglass_bg_colorg,.frostedglass_blur,.frostedglass_opacity").val(""),e.find(".wp-color-result").css("background-color","");var r=e.find(".frostedglass_image_set");1==r.prop("checked")&&r.prop("checked",!1)}}),e.find(".frostedglass_image_set").on("click",function(){var e,a=t(this),i=n(a);e=i.hasClass("tcard-front")||i.hasClass("tcard-back")?".glass":".glass-box",a.prop("checked")?i.find(e).css("background","inherit"):i.find(e).css("background","")});var d,c,l=wp.media({title:"Tcard Images Upload",multiple:!1,library:{type:"image"},button:{text:"Insert"}});e.find(".set_upload_bg").on("click",function(e){return l.open(),d=t(this),c=n(d),!1}),l.on("select",function(){var t=l.state().get("selection").toJSON();return t.length&&(d.prev(".tcard-image-input").val(t[0].url),c.css("background-image","url("+t[0].url+")")),!1}),e.find(".tcard-remove-image").on("click",function(e){n(t(this)).css("background-image",""),t(this).next(".tcard-image-input").val("")})},fade_content:function(a,n,i,s,r){e=!0,t(n).each(function(){var e=t(this).attr(i),n=t(this);-1!==e.indexOf(a)?(t(this).fadeIn(500),s.length&&t(this).parent(s).animate({height:n.height()+r},200)):t(this).fadeOut(0)}),setTimeout(function(){e=!1},400)},mainElements:function(){var e=this;t(".new-box").draggable({helper:"clone",zIndex:999});var a,n,i;t(".tcard-row").droppable({accept:".new-box",helper:"clone",over:function(e,s){a=t(this).find("*[data-item="+s.helper.attr("data-item")+"]"),n=s.helper.attr("data-item"),i=s.helper.attr("data-side"),s.helper.hasClass(n)?a.length&&s.helper.addClass("not-accepted"):a.each(function(){-1!==t(this).attr("data-item").indexOf(n)&&t(this).find("."+i+"-side").length&&s.helper.addClass("not-accepted")})},drop:function(s,r){r.helper.hasClass(n)?(a.length||(r.draggable.hasClass("tcard-header")?r.draggable.clone().prependTo(t(this).find(".tcard-skin")):r.draggable.hasClass("tcard-content")?t(this).find(".tcard-skin .tcard-footer").length?t(this).find(".tcard-skin .tcard-footer").length?t(this).find(".tcard-skin .tcard-footer").before(r.draggable.clone().appendTo(t(this).find(".tcard-skin"))):r.draggable.clone().appendTo(t(this).find(".tcard-skin")):t(this).find(".tcard-skin .tcard-gallery").before(r.draggable.clone().appendTo(t(this).find(".tcard-skin"))):r.draggable.hasClass("tcard-footer")&&(t(this).find(".tcard-gallery").length?t(this).find(".tcard-gallery").before(r.draggable.clone().appendTo(t(this).find(".tcard-skin"))):r.draggable.clone().appendTo(t(this).find(".tcard-skin")))),t(this).removeClass("extra-height"),e.sortable()):a.each(function(){-1===t(this).attr("data-item").indexOf(n)||a.find("."+i+"-side").length||("front"==i?t(this).find(".tcard-item-title").closest(".tcard-item-bar").after(r.draggable.clone().appendTo(t(this))):r.draggable.clone().appendTo(t(this)),e.sortable())})}})},sortable:function(){var e=this;t(".new-element").draggable({connectToSortable:".tcard-item-elements",helper:"clone",zIndex:999,connectWith:".tcard-item-elements",start:function(e,a){a.helper.attr("element-parent",t(this).closest(".tcard-item-inner").attr("data-tcard-box")),a.helper.attr("element-file",t(this).closest(".tcard-item-inner").attr("data-file"))}}),t(".customSkin .tcard-item-elements").sortable({accept:".tcard-bar-element",delay:100,over:function(e,a){a.item.hasClass("new-element")&&(a.item.hasClass("tcard-social")||(a.item.hasClass("login")&&a.item.attr("data-element","login")&&a.item.closest(".tcard-main-elem").hasClass("back-side")||!t(this).closest(".tcard-item").hasClass(a.item.attr("element-parent"))?a.helper.addClass("not-accepted"):a.helper.removeClass("not-accepted")))},stop:function(a,n){if(n.item.hasClass("new-element")){var s=n.item.next(".tcard-element");n.item.remove();var r,o=t(this).closest(".tcard-row").index();if(r=t(this).closest(".tcard-main-elem").attr("data-side"),t(this).closest(".tcard-item").hasClass(n.item.attr("element-parent")))n.item.hasClass("login")||"login"===n.item.attr("data-element")||"back"!=r?"front"==r&&i.add_element(n.item.attr("element-file"),n.item.attr("data-element"),r,o,t(this),s):i.add_element(n.item.attr("element-file"),n.item.attr("data-element"),r,o,t(this),s);else if("twitter_feed"==n.item.attr("data-element")||"twitter_profile"==n.item.attr("data-element")){var d;t(this).closest(".tcard-item").hasClass("tcard-header")?d="TcardHeaderElements":t(this).closest(".tcard-item").hasClass("tcard-content")?d="TcardContentElements":t(this).closest(".tcard-item").hasClass("tcard-footer")&&(d="TcardFooterElements"),i.add_element(d,n.item.attr("data-element"),r,o,t(this),s)}}t(this).find(".tcard-textarea").length&&(wp.editor.remove(t(this).find(".tcard-textarea").attr("id")),e.add_wp_editor(n.item.find(".tcard-textarea")))}})},setWidth:function(e,a){var n=["tc-1","tc-2","tc-3","tc-4"],i=-1;n.forEach(function(t,e){a.closest(".tcard-element").hasClass(n[e])&&(i=e)}),a.closest(".tcard-element").each(function(){"increase"==e?i<n.length-1&&(i++,t(this).removeClass(n[i-1]).addClass(n[i])):"decrease"==e&&i>0&&(i--,t(this).removeClass(n[i+1]).addClass(n[i])),t(this).one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){var e=Math.round((t(this).width()+6)/t(this).parent().width()*100)+"%";t(this).find(".elem-width").val(e)})}),window.onbeforeunload=function(){return!0}},removeContent:function(t,e){var a=e.closest(".tcard-row"),n=e.closest(".tcard-item"),i=e.closest(".tcard-main-elem");"element"==t?(e.parent().remove(),i.find(".tcard-element").length||(i.remove(),n.find(".tcard-main-elem").length||(n.remove(),a.find(".tcard-item").length||a.addClass("extra-height")))):"item"==t&&(n.remove(),a.find(".tcard-item").length||a.addClass("extra-height")),window.onbeforeunload=function(){return!0}},modal:function(e){e.fadeIn().addClass("is-open"),e.find(".tc-input-title").off().on("input",function(){function e(t){var e=document.createElement("DIV");return e.innerHTML=t,e.textContent||e.innerText}var a;a=t(this).val().length>12?e(t(this).val()).substr(0,12)+"...":e(t(this).val()),t(this).closest(".tcard-element").find(".tcard-element-bar span").text(a)}),e.find(".clear_after_login").off().on("click",function(){t(this).next("select").each(function(){t(this).find("option").removeAttr("selected")})}),e.find(".select-social").off().on("change",function(){t(this).closest(".tcard-element").find(".tcard-element-bar span").text(t(this).val())}),e.find(".tc-show-input").length&&e.find("select.tc-show-input").off().on("change",function(){if(t(this).closest(".tc_button").length||t(this).closest(".image_button").length){if(t(this).closest(".tc_button").length)var e=".tc_button";else e=".image_button";"text"==t(this).val()||"link"==t(this).val()?t(this).closest(e).find(".tchp_text_btn").css("display","block"):t(this).closest(e).find(".tchp_text_btn").css("display","none").val("")}else"text"==t(this).val()||"link"==t(this).val()?t(this).next(".tchp_text_btn").css("display","block"):t(this).next(".tchp_text_btn").css("display","none").val("")})},reorder:function(e){var a=[];t(".tcard_skin_id").each(function(){a.push(t(this).val())}),a.sort(function(t,e){return t-e});for(var n=0;n<t(".tcard_skin_id").length;n++)t(".tcard_skin_id").eq(n).val(a[n]);t(e).each(function(){var e=parseInt(t(this).attr("data-index")),a=t(this).index();t(this).find(".tcard-skin-order").text(a+1),t(this).find(".tcard_check").attr("name","tcard_check_order"+a),t(this).find(".tcard-input").each(function(){var n=t(this).attr("name").replace(e,a);t(this).attr("name",n)}),t(this).find(".assigns-tcard-gallery select,.tcg-box input").each(function(){var n=t(this).attr("name").replace(e,a);t(this).attr("name",n)}),window.onbeforeunload=function(){return!0}})},add_wp_editor:function(e){t(e).each(function(){var e=t(this).attr("id");wp.editor.initialize(e,{mediaButtons:!0,tinymce:{wpautop:!0,toolbar1:"formatselect bold italic | bullist numlist | blockquote | alignleft aligncenter alignright | wp_more",min_height:"150",plugins:"colorpicker lists compat3x directionality link image charmap hr image fullscreen media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wpview wptextpattern",wpautop:!1,init_instance_callback:function(e){e.on("keyup",function(a){t("#"+e.id).each(function(){if(t(this).closest(".tcard-modal-item").hasClass("tc-textarea-title")){var e,a=tinyMCE.activeEditor.getContent({format:"text"});e=a.length>12?a.substr(0,12)+"...":a,t(this).closest(".tcard-element").find(".tcard-element-bar span").text(e),window.onbeforeunload=function(){return!0}}})})}},quicktags:{buttons:"strong,em,link,img,block,ul,ol,li,code,ins,more"}})})},add_item_list:function(e,a){var n,i=e.closest(".tcard-row").index();n=e.closest(".tcard-main-elem").hasClass("front-side")?"front":"back";var s,r,o,d,c,l,m=e.closest(".tcard-modal-body").find(".tcard-modal-item"),h=e.closest(".tcard-modal-body").find(".tcard-modal-content"),u='<div class="tcard-modal-item tcard_con_reg"><div class="tcard-modal-item-inner"><h4 class="tcard-with-em">Item Title: <br><span class="tcard-em">Require</span></h4><input class="tcard-input" type="text" name="footer'+i+"_"+n+"[info_list_title"+(s=e.attr("data-itemnum")?e.attr("data-itemnum"):"")+'][]" value=""><h4 class="tcard-remove-item"></h4></div><div class="tcard-modal-item-inner"><h4>Item Text: </h4><input class="tcard-input" type="text" name="footer'+i+"_"+n+"[info_list_text"+s+'][]" value=""></div><div class="tcard-animation"><h4>Delay:</h4><input class="tcard-input" type="number" name="footer'+i+"_"+n+'[delay][]" value=""></div></div>';h.hasClass("contact")?(r='<h4 class="tcard-with-em">Label name: <br> <em class="tcard-em">Default : '+a+" </em></h4>",d="contact_item",c="content",o="contact",l=a):h.hasClass("register")?(r='<h4 class="tcard-with-em">Label name: <br> <em class="tcard-em">Default : '+a+" </em></h4>",d="register_item",c="content",o="register",l=a):(r='<h4><i class="fab fa-'+("google+"==a?"google-plus-square":"instagram"==a||"linkedin"==a||"flickr"==a?a:a+"-square")+'"></i> </h4>',o="social_list_order"+s,d="social_list"+s,c="footer",l=a+" username");var p='<div class="tcard-modal-item"><div class="tcard-modal-item-inner tcard_con_reg"><input class="tcard-input" type="hidden" name="'+c+i+"_"+n+"["+o+'][]" value="'+a+'">'+r+'<input class="tcard-input" placeholder="'+l+'" type="text" name="'+c+i+"_"+n+"["+d+'][]" value=""><h4 class="tcard-remove-item"></h4><div class="tcard-animation"><h4>Delay:</h4><input class="tcard-input" type="number" name="'+c+i+"_"+n+'[delay][]" value=""></div></div></div>',f='<div class="tcard-modal-item tc-skill-item"><div class="tc-skill-name"><h4>Skill name: </h4><input class="tcard-input" type="text" name="content'+i+"_"+n+"[skills_skill"+s+'][]" value=""><h4 class="tcard-remove-item"></h4></div><div class="tc-skill-percent"><h4>Skill percent: </h4><input class="tcard-input" type="number" name="content'+i+"_"+n+"[skills_percent"+s+'][]" value=""></div><div class="tcard-animation"><h4>Delay:</h4><input class="tcard-input" type="number" name="content'+i+"_"+n+'[delay][]" value=""></div></div>',v='<div class="tcard-modal-item tcard_con_reg"><div class="tcard-modal-item-inner"><h4>Text: </h4><input class="tcard-input" type="text" name="content'+i+"_"+n+"[list"+s+'][]" value=""><h4 class="tcard-remove-item"></h4></div><div class="tcard-animation"><h4>Delay:</h4><input class="tcard-input" type="number" name="content'+i+"_"+n+'[delay][]" value=""></div></div>',g='<div class="tcard-modal-item"><div class="tcard-modal-item-inner tcard_con_reg"><input class="tcard-input" type="hidden" name="header'+i+"_"+n+"[social_button_order"+s+'][]" value="'+a+'">'+r+'<input class="tcard-input" type="text" placeholder="'+a+' username" name="header'+i+"_"+n+"[social_button"+s+'][]" value=""><h4 class="tcard-remove-item"></h4></div></div>';h.hasClass("info_list")?t(u).appendTo(h.find(".tcard-modal-sortable")):h.hasClass("social_list")||h.hasClass("contact")||h.hasClass("register")?t(p).appendTo(h.find(".tcard-modal-sortable")):h.hasClass("skills")?m.last().before(t(f).appendTo(h)):h.hasClass("list")?t(v).appendTo(h.find(".tcard-modal-sortable")):h.hasClass("social_button")&&t(g).appendTo(h.find(".tcard-modal-sortable")),window.onbeforeunload=function(){return!0}},copy_shortcode:function(t){var e,a;window.getSelection?(a=window.getSelection(),(e=document.createRange()).selectNodeContents(t),a.removeAllRanges(),a.addRange(e)):document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText(t),e.select()),document.execCommand("Copy")},upload_image:function(){var e,a=wp.media({title:"Tcard Images Upload",multiple:!1,library:{type:"image"},button:{text:"Insert"}});t(document).on("click",".tcard-up-image",function(n){return a.open(),e=t(this),!1}),a.on("select",function(){var t=a.state().get("selection").toJSON();return t.length&&(e.parent(".right").length?e.parent().prev(".tcard-image-input").val(t[0].url):e.prev(".tcard-image-input").val(t[0].url),e.closest(".tcard-sidebar-item.image_loader").find(".arc_loader").length&&e.closest(".tcard-sidebar-item.image_loader").find(".arc_loader").attr("src",t[0].url),e.closest(".tcard-modal-content").hasClass("image_button")?e.closest(".tcard-element.image_button").find(".tcard-avatar-src").attr("src",t[0].url):(e.closest(".tcard-modal-content").find(".tcard-profile-image").css("display","block"),e.closest(".tcard-modal-content").find(".tcard-profile-image img").attr("src",t[0].url))),!1}),t(".tcard-image-input").on("change",function(){t(this).closest(".tcard-modal-content").find(".tcard-profile-image").css("display","block"),t(this).closest(".tcard-modal-content").find(".tcard-profile-image img").attr("src",t(this).val())})},gallery:function(){function e(){t(".tcard-gallery .gallery").sortable({opacity:.8,cursor:"move",delay:100,placeholder:"tcg-highlight",start:function(e,a){t(".tcg-highlight").height(a.item.outerHeight())}})}var a,n=wp.media({title:"Tcard Multiple Images Upload",multiple:!0,library:{type:"image"},button:{text:"Insert into gallery"}});t(document).on("click",".tc-multiple-images",function(){return n.open(),a=t(this),!1}),n.on("select",function(){var t=n.state().get("selection").toJSON();if(t.length)for(var e=0;e<t.length;e++){var i='<div class="tcg-box" style="background-image: url('+t[e].url+')"><input type="hidden" name="tcg_gallery'+a.closest(".tcard-row").index()+'[image][]" value='+t[e].url+'><div class="remove-tcg-img"></div></div>';a.closest(".tcard-gallery").find(".gallery").append(i)}return!1});var i;t(document).on("focusin",".assigns-tcard-gallery select",function(){i=this.value}),t(document).on("change",".assigns-tcard-gallery select",function(){if(t(this).val()!==i&&(t(this).closest(".tcard-gallery").find(".gallery").remove(),!t(this).val().length&&t(this).val().length||(t(this).closest(".tcard-gallery").append('<div class="gallery"></div>'),e())),t(this).val())t(this).closest(".tcard-gallery").find(".tc-multiple-images").remove();else{t(this).closest(".tcard-gallery").find(".tcard-gallery-bar").append('<span class="tc-multiple-images"><i class="fas fa-cloud-upload-alt"></i></i></span>')}window.onbeforeunload=function(){return!0}}),t(document).on("click",".remove-tcg-img",function(){t(this).closest(".tcg-box").remove()}),t(document).on("change",".thumbnail-name select",function(){var e='<input class="thumbnail_title" type="text" name="tcg_gallery'+t(this).closest(".tcard-row").index()+'[thumbnail_title]" value="">';"thumbnail_title"==t(this).val()?t(this).parent().append(e):t(this).parent().find(".thumbnail_title").remove(),window.onbeforeunload=function(){return!0}}),e()},tcardSlider:function(){var e=-1;t(document).on("click",".tcard-add-slide",function(){var a,i,s,r=t(this),o=r.closest(".tcard-modal-body").find(".tcard-modal-content.slider");o.find(".slider_container").length?(e=o.find(".slider_container").length-1,e++):o.find(".slider_container").length?e++:e=0,s=r.attr("data-itemnum"),a=r.closest(".tcard-row").index();i=r.closest(".tcard-main-elem").hasClass("front-side")?"front":"back";var d='<div class="settings-btn" data-menu-container="slide_'+e+'">Slide'+(e+1)+"</div>";o.find(".slider-menu-modal").length||o.append('<div class="tcard-modal-item slider-menu-modal"></div>'),o.find(".slider-menu-modal").append(d);var c=o.find(".slider-menu-modal").find(".settings-btn").first();c.hasClass("curr")||(c.addClass("curr"),c.addClass("tc-current-side"));var l='<div class="tcard-modal-container slider_container" data-modal-container="slide_'+e+'"><input type="hidden" name="content'+a+"_"+i+"[slider_items_order"+s+'][]" value="slide_'+e+'"><div class="tcard-remove-slide" data-remove-slide="slide_'+e+'">Remove Slide</div><div class="tcard-modal-item"><h4>Title:</h4><input class="tcard-input" type="text" name="content'+a+"_"+i+"[slider_item_title"+s+'][]" value=""></div><div class="tcard-modal-item"><h4 class="tc-modal-editor-title">Description:</h4><textarea id="tc-content-editor-'+i+"slider"+a+s+e+'" class="tcard-textarea tc-new-editor tcard-input" type="text" name="content'+a+"_"+i+"[slider"+s+'][]"></textarea></div><div class="tcard-modal-item"><div class="tcard-modal-item-inner"><h4>Button Text: </h4><input class="tcard-input" type="text" name="content'+a+"_"+i+"[slider_btntext"+s+'][]" value=""></div><div class="tcard-modal-item-inner"><h4>Button Link:</h4><input class="tcard-input" type="text" name="content'+a+"_"+i+"[slider_btnlink"+s+'][]" value=""></div></div></div>';o.append(l);var m=o.find(".slider_container").first();m.hasClass("curr")||(m.addClass("curr"),m.css("display","block")),o.find(".tcard-textarea").each(function(){t(this).hasClass("tc-new-editor")&&(wp.editor.remove(t(this).attr("id")),n.add_wp_editor(".tcard-textarea.tc-new-editor"),t(this).removeClass("tc-new-editor"))})}),t(document).on("click",".tcard-remove-slide",function(){var e=t(this),a=e.closest(".tcard-modal-body").find(".settings-btn.tc-current-side");a.next().length?a.next().addClass("tc-current-side"):a.prev().addClass("tc-current-side"),a.remove(),e.parent(".slider_container").next().length?e.parent(".slider_container").next().fadeIn():e.parent(".slider_container").prev().fadeIn(),e.parent(".slider_container").remove();for(var n=t(".tcard-modal.is-open"),i=0;i<n.find(".slider_container").length;i++)n.find(".settings-btn").eq(i).attr("data-menu-container","slide_"+i).text("Slide"+(i+1)),n.find(".slider_container").eq(i).attr("data-modal-container","slide_"+i),n.find(".slider_container").eq(i).find(".tcard-remove-slide").attr("data-remove-slide","slide_"+i)})}};n.settings(t(".tcard-modal-body.settings-skin")),n.sortable(),n.add_wp_editor(".tcard-textarea"),n.mainElements(),n.upload_image(),n.gallery(),n.tcardSlider();var i={add_skin:function(s,r,o,d){e=!0;var c={action:"tcard_add_skin",security:tcard.add_skin,group_id:tcard.group_id,type_action:s,nameSkin:r,startCount:o-1,stopCount:o,skinCloned:d};t(".spinner").css("visibility","visible"),t.ajax({url:ajaxurl,type:"POST",data:c,success:function(a){"clone-skin"==s?t(a).appendTo(".tcard-container-skins").addClass("cloned-settings").find(".skin-cloned-after").html('<i class="fas fa-clone"></i> '+r+"."+(d+1)):t(a).appendTo(".tcard-container-skins").addClass("cloned-settings"),t(".spinner").css("visibility","hidden"),n.mainElements(),n.add_wp_editor(t(a).find(".tcard-textarea")),n.settings(t(".cloned-settings .tcard-modal-body.settings-skin")),t(".tcard-row").removeClass("cloned-settings"),t(".tcard-container-skins").hasClass("customSkin")&&(n.sortable(),t(".modal-post-content").sortable({opacity:.8,cursor:"move",delay:100})),e=!1},error:function(e){alert("Skin could not load"),t(".tcard-row").eq(a).length?a=o-1:a-=1,t(".tcard-count-skin").find("span").text(a),t(".tc-add-new-skin").find("input").val(a),i.delete_skin(a,t(".tcard-row").length)}})},delete_skin:function(e,a){var n={action:"tcard_delete_skin",security:tcard.delete_skin,group_id:tcard.group_id,skin_key:e,skins_number:a};t.ajax({url:ajaxurl,type:"POST",data:n,success:function(t){window.onbeforeunload=function(){return!0}},error:function(){alert("No skin-"+e+" found")}})},select_skin:function(e){var a={action:"tcard_select_skin",security:tcard.select_skin,group_id:tcard.group_id,group_name:t(".tcard-group-title").val(),skin_type:e};t.ajax({url:ajaxurl,type:"POST",data:a,success:function(){window.onbeforeunload=null,location.reload()},error:function(){alert("File missing!")}})},add_element:function(e,a,i,s,r,o){var d={action:"tcard_add_element",security:tcard.add_element,tc_parent:e,tc_element:a,skin_side:i,skin_index:s,group_id:tcard.group_id,elemNumber:r.find(".tcard-element."+a).length};t(".spinner").css("visibility","visible"),t.ajax({url:ajaxurl,type:"GET",data:d,success:function(e){o.length?o.before(t(e).appendTo(r)):t(e).appendTo(r).addClass("new-element_maybe"),t(".spinner").css("visibility","hidden"),n.add_wp_editor(t(e).find(".tcard-textarea")),t(".modal-post-content,.tcard-modal-sortable").sortable({opacity:.8,cursor:"move",delay:100}),window.onbeforeunload=function(){return!0}},error:function(){alert("The element can not be loaded!")}})}}})}(jQuery);