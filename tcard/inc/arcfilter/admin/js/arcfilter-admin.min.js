/* 
 Author: Cloanta Alexandru
 Name: Tcard > Arcfilter Wordpress
 Version: 2.9.1
*/

!function(t){"use strict";t(document).on("ready",function(){var e=!1,i=0;t(".group-settings .select_category_type").on("change",function(){c.select_category(t(this).val())}),t(".add-arcfilter-cat").on("click",function(a){if(!t(".select-tcard-group select").val())return alert("Please create a group"),void t(this).find("input").val("");if(!e){t(this).find("input").val()>0&&(i=t(this).find("input").val()),i++,t(".arcfilter-count-cat").find("span").text(i),t(this).find("input").val(i);t(".category_box").length;c.add_category(i)}}),t(".add_attr_wc").on("click",function(){var e=t(this).next(".tcard-input").val(),i=t(this).next(".tcard-input").find("option:selected").attr("data-label"),a='<div class="wc_get_attribute"><input type="hidden" class="tcard-input" name="group_set[wc_sidebar_attribute][name][]" value="'+e+'"><input type="hidden" class="tcard-input" name="group_set[wc_sidebar_attribute][label][]" value="'+i+'"><span class="remove_attr_wc"></span><h4>'+i+"</h4></div>";t(".wc_get_attributes").append(a)}),t(document).on("click",".remove_attr_wc",function(){t(this).closest(".wc_get_attribute").remove()}),t(".wc_get_attributes").sortable({opacity:.8,cursor:"move",delay:100,placeholder:"tcard-highlight",start:function(e,i){t(".tcard-highlight").height(i.item.outerHeight()).width(i.item.outerWidth())}}).disableSelection(),t(".tcard-up-default").on("click",function(){var e=t(this).closest(".tcard-sidebar-item.image_loader");e.find(".tcard-image-input").val(""),e.find(".arc_loader").attr("src",e.find(".arc-default-loader").val())}),t(document).on("change",".price_type",function(){"normal"==t(this).val()?t(this).closest(".filter-options").find(".group_price").slideDown(300):t(this).closest(".filter-options").find(".group_price").slideUp(300)}),t(".arc_bar_cat").on("click",function(e){if(e.target==this){var i=t(this).find("input.tcard_check");t(this).next(".arc_container").slideToggle(),i.prop("checked")?i.prop("checked",!1):i.prop("checked",!0)}});var a,r;t(".arcfilter-categories .arc_container").sortable({opacity:.8,cursor:"move",delay:100,placeholder:"tcard-highlight",start:function(e,i){t(".tcard-highlight").height(i.item.outerHeight()).width(i.item.outerWidth());for(var a=0;a<t(".category_box").length;a++)t(".category_box").eq(a).attr("data-index",a);r=i.item.index()},update:function(e,i){t(".category_box").each(function(){var e=parseInt(t(this).attr("data-index")),i=t(this).index();t(this).find(".tcard-input").each(function(){var a=t(this).attr("name").replace(e,i);t(this).attr("name",a)})}),a=t(this).closest(".arcfilter-container_main").attr("id"),t("#arcfilter-items div.arcfilter-row").each(function(e){t(this).attr("data-index",e)});var c=i.item.index();c>r?t("#arcfilter-items div.arcfilter-row:eq("+r+")").insertAfter("#arcfilter-items div.arcfilter-row:eq("+c+")"):t("#arcfilter-items div.arcfilter-row:eq("+r+")").insertBefore("#arcfilter-items div.arcfilter-row:eq("+c+")"),t("#arcfilter-items div.arcfilter-row").each(function(e){var i=parseInt(t(this).attr("data-index")),a=t(this).index();t(this).find(".tcard-input").each(function(){var e=t(this).attr("name").replace(i,a);t(this).attr("name",e)})})}}).disableSelection(),t(document).on("click",".arc-open-modal",function(){t(this);t(this).next(".tcard-modal").fadeIn().addClass("is-open")}),t(".clear-random").on("click",function(){t(".animations-random").val("")}),t(".tcard-input.type_of_display").each(function(){"button"==t(this).val()&&t(".tcard-sidebar-item.group-settings.more_items").addClass("active")}),t(".type_of_display").on("change",function(){""!==t(this).val()?t(".tcard-sidebar-item.group-settings.first_items").slideDown(200):(t(".tcard-sidebar-item.group-settings.first_items").slideUp(200),t(".tcard-sidebar-item.group-settings.first_items .tcard-input").val("")),"button"==t(this).val()||"scroll"==t(this).val()?t(".tcard-sidebar-item.group-settings.more_items").slideDown(200):(t(".tcard-sidebar-item.group-settings.more_items").slideUp(200),t(".tcard-sidebar-item.group-settings.more_items .tcard-input").val("")),"pagination"==t(this).val()?(t(".display_items_hidden").find("option.remove_op").remove(),t(".no_page").slideDown(200),t(".all_cat").slideDown(200),t(".arrow_pagination").slideDown(200)):(t(".display_items_hidden").append('<option class="remove_op" value="hidden">Hidden</option>'),t(".no_page").slideUp(200),t(".all_cat").slideUp(200),t(".arrow_pagination").slideUp(200),t(".arrow_pagination").find(".tcard-input[type=text]").val(""),t(".all_cat,.no_page").find(".tcard-input[type=checkbox]").each(function(){t(this).prop("checked",!1)}))}),t(".select_wc_method").on("click",function(){var e=t(this).attr("data-method"),i=t(this).text(),a=t(this).attr("data-itemnum");if("name"==e||"short_description"==e){if("short_description"==e)var r=17;else r="";var c='<div class="tc_post_item '+e+'"><input class="tcard-input" type="hidden" name="cat_items'+a+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+i+'</h4><span>Max words</span><input class="tcard-input" type="number" placeholder="'+r+'" name="cat_items'+a+"[set_item]["+e+']" value=""></div>'}else c="image"==e?'<div class="tc_post_item '+e+'"><input class="tcard-input" type="hidden" name="cat_items'+a+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+i+'</h4><span>Change image on hover</span><div class="tc-check-settings hover_image"><input id="hover_image'+a+'" type="checkbox" name="cat_items'+a+"[set_item]["+e+']" value="1"><label for="hover_image'+a+'"></label></div></div>':"group"==e?'<div class="tc_post_item '+e+'"><input class="tcard-input" type="hidden" name="cat_items'+a+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+i+'</h4><span>Change image on hover<div class="tc-check-settings hover_image"><input id="group_hover_image'+a+'" type="checkbox" name="cat_items'+a+"[set_item]["+e+']" value="1"><label for="group_hover_image'+a+'"></label></div>Badges: <span class="group_badges">Sale, Out of stock, Featured</span></span></div>':"is_on_sale"!==e&&"featured"!==e&&"out_of_stock"!==e&&"price"!==e&&"add_to_cart"!==e&&"rating"!==e?'<div class="tc_post_item '+e+'"><input class="tcard-input" type="hidden" name="cat_items'+a+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+i+'</h4><span>Text</span><input class="tcard-input" type="text" placeholder="'+i+'" name="cat_items'+a+"[set_item]["+e+']" value=""></div>':'<div class="tc_post_item '+e+'"><input class="tcard-input" type="hidden" name="cat_items'+a+'[post_item][]" value="'+e+'"><div class="remove-post-item"></div><h4>'+i+"</h4></div>";t(c).appendTo(t(this).closest(".tcard-modal-content").find(".modal-post-content.arcfilter_item_post"))}),t(document).on("click",".arc-delete-category",function(){for(var e=0;e<t(".category_box").length;e++)t(".category_box").eq(e).attr("data-index",t(".category_box").eq(e).index());t(".arcfilter-items .arcfilter-row").eq(t(this).closest(".category_box").index()).remove(),t(this).closest(".category_box").remove(),t(".category_box").each(function(){var e=parseInt(t(this).attr("data-index")),i=t(this).index();t(this).find(".tcard-input").each(function(){var a=t(this).attr("name").replace(e,i);t(this).attr("name",a)})}),t(".arcfilter-count-cat span").text(t(".category_box").length),t(".add-arcfilter-cat input").val(t(".category_box").length)}),t(".select_style_items.tcard-input").on("change",function(){t("#tcard-save").trigger("click")}),t(".open-wc-advanced-filter").on("click",function(){t(this).toggleClass("active"),t(".wc-advanced-filter").toggleClass("active")}),t(".advanced-filter-type .filter-head").on("click",function(){t(this).next(".filter-options").slideToggle(300)});var c={select_category:function(e){var i={action:"arcfilter_select_category",security:arcfilter.select_category,group_id:arcfilter.group_id,category_type:e};t(".spinner").css("visibility","visible"),t.ajax({url:ajaxurl,type:"POST",data:i,success:function(e){t(".spinner").css("visibility","hidden"),location.reload()},error:function(t){alert("Category type could not be saved")}})},add_category:function(i){e=!0;var a={action:"arcfilter_add_category",security:arcfilter.add_category,group_id:arcfilter.group_id,number:i-1,category_id:t(".group-settings .category_type").val(),category_type:t(".group-settings .select_category_type").val(),category_slug:t(".group-settings .category_type option:selected").attr("data-slug"),category_name:t(".group-settings .category_type option:selected").attr("data-title"),category_items:t(".group-settings .category_type option:selected").attr("data-items")};t.ajax({url:ajaxurl,type:"POST",data:a,success:function(i){var a=JSON.parse(i);t(".spinner").css("visibility","visible"),t(".arcfilter-categories .arc_container").append(a.category),t(".arcfilter-items").append(a.items),t.when(i).promise().done(function(){t(".spinner").css("visibility","hidden"),e=!1,window.onbeforeunload=function(){return!0}})},error:function(e){alert("Category could not load"),t(".category_box").eq(i).length?i=numberSkin-1:i-=1,t(".arcfilter-count-cat").find("span").text(i),t(".add-arcfilter-cat").find("input").val(i)}})}}})}(jQuery);